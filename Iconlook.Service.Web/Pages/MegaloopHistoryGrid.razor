@inject HttpContextAccessor HttpAccessor
<style>
    .address-name {
        padding: 3px 7px;
        border-radius: 3px;
        background-color: #e1fafd;
        border: solid 1px #1aaaba;
    }

    .staked_amount .number-part {
        font-weight: 600;
    }

    .staked_amount .fraction-part {
        font-weight: 400;
    }

    .unstaking_amount .number-part {
        font-weight: 700;
    }

    .unstaking_amount .fraction-part {
        font-weight: 500;
    }
</style>
<SfGrid @ref="SfGrid"
         ID="history_grid"
         EnableHover="false"
         EnableAltRow="false"
         AllowSelection="false"
         GridLines="GridLine.Horizontal"
         TValue="UnstakingAddressResponse">
    <SfDataManager Url="/api/v1/address/list/unstaking?take=12" Adaptor="Adaptors.WebApiAdaptor"></SfDataManager>
    <GridColumns>
        <GridColumn Width="110" HeaderText="Draw Date">
            <Template>
                <span class="mono">08 May 2020</span>
            </Template>
        </GridColumn>
        <GridColumn Width="120" HeaderText="Pool Size" TextAlign="TextAlign.Right" HeaderTextAlign="TextAlign.Right" Field="@nameof(UnstakingAddressResponse.Unstaking)">
            <Template>
                @{
                    if (context is UnstakingAddressResponse address)
                    {
                        if (IsMobile)
                        {
                            <span class="mono ls-n2 font-weight-semibold">@address.Unstaking.ToString("N0")</span>
                            <span class="pl-1 text-light font-weight-light">ICX</span>
                        }
                        else
                        {
                            <span class="mono ls-n2 unstaking_amount">@address.Unstaking.ToIcxString()</span>
                            <span class="pl-1 text-light font-weight-light">ICX</span>
                        }
                    }
                }
            </Template>
        </GridColumn>
        <GridColumn HeaderText="Winner" TextAlign="TextAlign.Right" HeaderTextAlign="TextAlign.Right" Field="@nameof(UnstakingAddressResponse.Hash)">
            <Template>
                @{
                    if (context is UnstakingAddressResponse address)
                    {
                        <a class="primary no-underline" href="https://tracker.icon.foundation/address/@address.Hash">
                            <span class="fs-n1 mono">@address.Hash</span>
                        </a>
                    }
                }
            </Template>
        </GridColumn>
    </GridColumns>
</SfGrid>

@code
{
    protected bool IsMobile;

    protected SfGrid<UnstakingAddressResponse> SfGrid;

    protected override void OnInitialized()
    {
        IsMobile = HttpAccessor.Context.Request.Headers["User-Agent"].ToString().Contains("Mobile");
    }
}