@page "/"
<style type="text/css">
    .card .e-grid {
        min-height: 880px;
    }

    .e-grid .e-gridheader {
        display: none;
    }

    .e-tab {
        background-color: white;
    }

    .submit-input.e-popup-open {
        top: 253px !important;
    }

    button.submit-button:hover,
    button.search-filter:hover {
        color: #1aaaba !important;
    }

    button.submit-button.e-active,
    button.search-filter.e-active {
        color: #1aaaba !important;
    }

    .e-grid .e-rowcell {
        padding-left: 0 !important;
        padding-right: 0 !important;
    }

    .search-filter.e-dropdown-popup {
        padding: 0;
        color: #666666;
    }

    .submit-input .e-input-group::after,
    .submit-input .e-input-group::before {
        background: none !important;
    }

    .submit-button {
        font-weight: bold;
        padding: 9px 12px 7px 8px;
        color: #666666 !important;
        background-color: white !important;
    }

    .search-filter {
        font-weight: bold;
        color: #666666 !important;
        padding: 9px 10px 7px 10px;
        background-color: white !important;
    }

    .search-filter.e-dropdown-popup .e-item {
        padding: 0 25px;
        font-size: 13px;
    }

    .search-filter.e-dropdown-popup .e-item:hover {
        color: #1aaaba;
        background: none;
    }

    textarea.e-input,
    .e-input-group textarea.e-input,
    input.e-input, .e-input-group input.e-input,
    .e-input-group.e-control-wrapper input.e-input,
    .e-input-group.e-control-wrapper textarea.e-input {
        padding: 5px 7px 0 7px !important;
    }

    .e-input-group:not(.e-success):not(.e-warning):not(.e-error):not(.e-float-icon-left),
    .e-input-group.e-float-icon-left:not(.e-success):not(.e-warning):not(.e-error) .e-input-in-wrap,
    .e-input-group.e-control-wrapper:not(.e-success):not(.e-warning):not(.e-error):not(.e-float-icon-left),
    .e-float-input.e-control-wrapper.e-float-icon-left:not(.e-success):not(.e-warning):not(.e-error) .e-input-in-wrap {
        border-color: transparent !important;
    }
</style>
<style type="text/css" media="(max-width: 769px)">
    .submit-input.e-popup-open {
        top: 2px !important;
    }

    .submit-button {
        margin: -2px 5px 0 0 !important
    }

    input.e-input,
    .e-input-group input.e-input,
    .e-input-group textarea.e-input,
    .e-input-group.e-control-wrapper textarea.e-input,
    .e-input-group.e-control-wrapper input.e-input, textarea.e-input {
        padding: 8px 7px 0 0 !important;
    }
</style>
<div class="card px-3 py-3 mb-3 rounded gradient shadow-sm border-0 d-lg-none d-md-block">
    <div class="row no-gutters align-items-center" style="border-radius: 3px; background-color: white;">
        <div class="col">
            <SfAutoComplete MinLength="3"
                            TValue="string"
                            Highlight="true"
                            SuggestionCount="10"
                            TItem="LookupResponse"
                            CssClass="submit-input"
                            ShowClearButton="false"
                            Query="new Query().RequiresCount()"
                            Placeholder="Lookup P-Rep / D-App / Address / Transaction">
                <AutoCompleteFieldSettings Value="Result"></AutoCompleteFieldSettings>
                <SfDataManager Url="/api/v1/lookup" Adaptor="Adaptors.WebApiAdaptor"></SfDataManager>
            </SfAutoComplete>
        </div>
        <div class="col col-auto">
            <SfButton CssClass="e-flat submit-button" IconCss="far fa-search"></SfButton>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-lg mb-3 mr-md-n3">
        <div class="card shadow-sm border-bottom-0">
            <div class="container">
                <div class="row text-nowrap">
                    <div class="col-sm d-inline-flex border-right border-bottom">
                        <MarketTile ChainResponse="ChainResponse"></MarketTile>
                    </div>
                    <div class="col-sm d-inline-flex border-right border-bottom">
                        <SupplyTile ChainResponse="ChainResponse"></SupplyTile>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg mb-3">
        <div class="card shadow-sm border-bottom-0">
            <div class="container">
                <div class="row text-nowrap">
                    <div class="col-sm d-inline-flex border-right border-bottom">
                        <TreasuryTile ChainResponse="ChainResponse"></TreasuryTile>
                    </div>
                    <div class="col-sm d-inline-flex border-bottom">
                        <BlockTile ChainResponse="ChainResponse"></BlockTile>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-lg mb-3 mr-md-n3 d-none d-md-block">
        <div class="card px-4 pt-3 pb-4 rounded gradient shadow-sm border-0">
            <div class="row pb-1">
                <div class="col text-center">
                    <h5 class="text-white font-weight-bold">
                        EXPLORE&nbsp;&nbsp;ICON&nbsp;&nbsp;ECOSYSTEM
                    </h5>
                </div>
            </div>
            <div class="row no-gutters align-items-center" style="height: 32px; border-radius: 3px; background-color: white;">
                <div class="col col-auto">
                    <SfDropDownButton Content="EVERYTHING" Items="SearchItems" CssClass="search-filter"></SfDropDownButton>
                </div>
                <div class="col">
                    <SfAutoComplete MinLength="3"
                                    TValue="string"
                                    Highlight="true"
                                    SuggestionCount="20"
                                    TItem="LookupResponse"
                                    CssClass="submit-input"
                                    ShowClearButton="false"
                                    Query="new Query().RequiresCount()"
                                    Placeholder="Lookup P-Rep / D-App / Address / Transaction">
                        <AutoCompleteFieldSettings Value="Result"></AutoCompleteFieldSettings>
                        <SfDataManager Url="/api/v1/lookup" Adaptor="Adaptors.WebApiAdaptor"></SfDataManager>
                    </SfAutoComplete>
                </div>
                <div class="col col-auto">
                    <SfButton Content="SEARCH" CssClass="e-flat submit-button" IconCss="far fa-search"></SfButton>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg mb-3 d-none d-md-block">
        <div class="card px-4 pt-3 pb-4 rounded gradient shadow-sm border-0">
            <div class="row pb-1">
                <div class="col text-center">
                    <h5 class="text-white font-weight-bold">
                        RUN&nbsp;&nbsp;WALLET&nbsp;&nbsp;TOOLS
                    </h5>
                </div>
            </div>
            <div class="row no-gutters" style="height: 32px; border-radius: 3px; background-color: white;">
                <div class="col col-auto">
                    <SfDropDownButton Content="ROUND" Items="ToolItems" CssClass="search-filter"></SfDropDownButton>
                </div>
                <div class="col">
                    <SfAutoComplete MinLength="3"
                                    TItem="string"
                                    TValue="string"
                                    CssClass="submit-input"
                                    ShowClearButton="false"
                                    Placeholder="Enter a wallet address to perform">
                    </SfAutoComplete>
                </div>
                <div class="col col-auto">
                    <SfButton CssClass="e-flat submit-button" IconCss="far fa-search">SUBMIT</SfButton>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-lg mb-3 mr-md-n3">
        <div class="card shadow-sm border-bottom-0">
            <div class="container">
                <div class="row text-nowrap">
                    <div class="col-sm d-inline-flex border-right border-bottom">
                        <VotingTile ChainResponse="ChainResponse"></VotingTile>
                    </div>
                    <div class="col-sm d-inline-flex border-right border-bottom">
                        <StakingTile ChainResponse="ChainResponse"></StakingTile>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg mb-3">
        <div class="card shadow-sm border-bottom-0">
            <div class="container">
                <div class="row text-nowrap">
                    <div class="col-sm d-inline-flex border-right border-bottom">
                        <TermTile ChainResponse="ChainResponse"></TermTile>
                    </div>
                    <div class="col leader-tile d-inline-flex border-bottom">
                        <LeaderTile PeerResponse="PeerResponse"></LeaderTile>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-sm mb-3 mr-sm-n3">
        <div class="main card mb-3 shadow-sm" style="min-height: 932px;">
            <SfTab Animation="Animation">
                <TabEvents Selecting="Select"/>
                <TabItems>
                    <TabItem Header="Governance">
                        <ContentTemplate>
                            <div class="card-body pt-1 pb-0">
                                <IndexGovernanceGrid></IndexGovernanceGrid>
                            </div>
                        </ContentTemplate>
                    </TabItem>
                    <TabItem Header="Production">
                        <ContentTemplate>
                            <div class="card-body pt-1 pb-0">
                                <IndexProductionGrid></IndexProductionGrid>
                            </div>
                        </ContentTemplate>
                    </TabItem>
                    <TabItem Header="Reward">
                        <ContentTemplate>
                            <div class="card-body pt-1 pb-0">
                                <IndexRewardGrid></IndexRewardGrid>
                            </div>
                        </ContentTemplate>
                    </TabItem>
                </TabItems>
            </SfTab>
        </div>
        <div class="d-none d-lg-block font-weight-bold position-absolute" style="top: 11px; right: 34px;">
            <NavLink class="primary" href="/prep/list">MORE</NavLink>
        </div>
    </div>
    <div class="col-sm mb-3">
        <div class="card mb-3 shadow-sm" style="min-height: 932px;">
            <SfTab Animation="Animation">
                <TabEvents Selecting="Select"/>
                <TabItems>
                    <TabItem Header="Blocks">
                        <ContentTemplate>
                            <div class="card-body py-1 overflow-hidden">
                                <IndexBlocksGrid></IndexBlocksGrid>
                            </div>
                        </ContentTemplate>
                    </TabItem>
                    <TabItem Header="Transactions">
                        <ContentTemplate>
                            <div class="card-body py-1 overflow-hidden">
                                <IndexTransactionsGrid></IndexTransactionsGrid>
                            </div>
                        </ContentTemplate>
                    </TabItem>
                </TabItems>
            </SfTab>
        </div>
        <div class="d-none d-lg-block font-weight-bold position-absolute" style="top: 11px; right: 34px;">
            <NavLink class="primary" href="/prep/list">MORE</NavLink>
        </div>
    </div>
</div>

@code {
    protected TabHeader Votes;
    protected TabHeader Blocks;
    protected TabHeader Reward;
    protected TabHeader Governance;
    protected TabHeader Production;
    protected TabHeader Transactions;
    protected PeerResponse PeerResponse;
    protected ChainResponse ChainResponse;
    protected TabAnimationSettings Animation;
    protected List<DropDownButtonItem> ToolItems;
    protected List<DropDownButtonItem> SearchItems;

    protected void Select(SelectingEventArgs args)
    {
        if (args.IsSwiped)
        {
            args.Cancel = true;
        }
    }

    protected override void OnInitialized()
    {
        PeerResponse = LocalCache.LastPeerResponse;
        ChainResponse = LocalCache.LastChainResponse;
        Animation = new TabAnimationSettings
        {
            Next = new TabAnimationNext { Duration = 0 },
            Previous = new TabAnimationPrevious { Duration = 0 }
        };
        ToolItems = new List<DropDownButtonItem>
        {
            new DropDownButtonItem { Text = "ROUND", IconCss = "fal fa-users-class" },
            new DropDownButtonItem { Text = "ANALYZE", IconCss = "fal fa-hashtag" },
            new DropDownButtonItem { Text = "INVESTIGATE", IconCss = "fal fa-dice" }
        };
        SearchItems = new List<DropDownButtonItem>
        {
            new DropDownButtonItem { Text = "P-REP", IconCss = "fal fa-users-class" },
            new DropDownButtonItem { Text = "ADDRESS", IconCss = "fal fa-hashtag" },
            new DropDownButtonItem { Text = "TRANSACTION", IconCss = "fal fa-dice" }
        };
        Votes = new TabHeader { Text = "VOTES", IconCss = "fal fa-ballot" };
        Blocks = new TabHeader { Text = "BLOCKS", IconCss = "fal fa-cube" };
        Production = new TabHeader { Text = "PRODUCTION", IconCss = "fal fa-server" };
        Reward = new TabHeader { Text = "REWARD", IconCss = "fal fa-money-check-alt" };
        Transactions = new TabHeader { Text = "TRANSACTIONS", IconCss = "fal fa-repeat" };
        Governance = new TabHeader { Text = "GOVERNANCE", IconCss = "fal fa-users-class" };
    }

}