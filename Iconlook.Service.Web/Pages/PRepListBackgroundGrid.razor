<EjsGrid EnableHover="true"
         EnableAltRow="true"
         TValue="PRepResponse"
         AllowPaging="CanPage"
         AllowSelection="CanEdit"
         GridLines="GridLine.Horizontal"
         Query="@(new Query().AddParams("edit", EditKey))">
    <GridPageSettings PageSize="PageSize" PageSizes="PageSizes"></GridPageSettings>
    <GridEditSettings AllowEditing="CanEdit" Mode="EditMode.Dialog"></GridEditSettings>
    <GridSearchSettings Operator="Operator.Contains" IgnoreCase="true"></GridSearchSettings>
    <EjsDataManager Url="/api/v1/preps?take=22" Adaptor="Adaptors.WebApiAdaptor"></EjsDataManager>
    <GridColumns>
        <GridColumn Width="220" Field="@nameof(PRepResponse.Name)" HeaderText="P-Rep">
            <HeaderTemplate>
                <span class="text-condensed"><i class="fal pl-1 pr-2 fa-users"></i>&nbsp;P-Rep</span>
            </HeaderTemplate>
            <Template>
                @{
                    if (context is PRepResponse prep)
                    {
                        <div class="d-flex align-items-center" style="margin-top: 1px;">
                            <img width="18" height="18" style="margin-top: -1px; margin-right: 8px;" src="@StringHelpers.ParseLogoUrl(prep.LogoUrl)">
                            <a class="secondary" href="address/@prep.Id">@prep.Name</a>
                        </div>
                    }
                }
            </Template>
        </GridColumn>
        <GridColumn Width="135" Field="@nameof(PRepResponse.Location)" HeaderText="Location">
            <HeaderTemplate>
                <span>Location<i class="far pl-2 fa-map-marker-alt"></i></span>
            </HeaderTemplate>
            <Template>
                @{
                    if (context is PRepResponse prep)
                    {
                        <span class="pt-1 text-condensed">@prep.Location</span>
                    }
                }
            </Template>
        </GridColumn>
        <GridColumn Width="105" Field="@nameof(PRepResponse.Location)" HeaderText="Joined">
            <Template>
                @{
                    if (context is PRepResponse prep)
                    {
                        <span class="text-condensed">@prep.Joined.ToString("dd MMM, yyyy")</span>
                    }
                }
            </Template>
        </GridColumn>
        <GridColumn Width="92" Field="@nameof(PRepResponse.Location)" HeaderText="Entity">
            <Template>
                @{
                    if (context is PRepResponse prep)
                    {
                        <span>@prep.Entity</span>
                    }
                }
            </Template>
        </GridColumn>
        <GridColumn Width="75" Field="@nameof(PRepResponse.Location)" HeaderText="Size">
            <Template>
                @{
                    if (context is PRepResponse prep)
                    {
                        <span class="font-weight-bold">3</span>
                        <span class="pl-1 fs-n1 text-light">people</span>
                    }
                }
            </Template>
        </GridColumn>
        <GridColumn Width="95" Field="@nameof(PRepResponse.Location)" HeaderText="Identity">
            <Template>
                @{
                    if (context is PRepResponse prep)
                    {
                        <span>@prep.Identity</span>
                    }
                }
            </Template>
        </GridColumn>
        <GridColumn Width="126" Field="@nameof(PRepResponse.Location)" HeaderText="Experience">
            <Template>
                @{
                    if (context is PRepResponse prep)
                    {
                        <span class="text-condensed">Dev, Biz, Marketing</span>
                    }
                }
            </Template>
        </GridColumn>
        <GridColumn Width="80" Field="@nameof(PRepResponse.Location)" HeaderText="Website" TextAlign="TextAlign.Right">
            <HeaderTemplate>
                <span><i class="far pr-2 fa-globe"></i>Website</span>
            </HeaderTemplate>
            <Template>
                @{
                    if (context is PRepResponse prep)
                    {
                        <a class="primary text-condensed" href="https://www.iconviet.io">iconviet.io</a>
                    }
                }
            </Template>
        </GridColumn>
        <GridColumn Width="80" Field="@nameof(PRepResponse.Location)" HeaderText="Twitter" TextAlign="TextAlign.Right">
            <HeaderTemplate>
                <span><i class="fab pr-2 fa-twitter"></i>Twitter</span>
            </HeaderTemplate>
            <Template>
                @{
                    if (context is PRepResponse prep)
                    {
                        <a class="primary text-condensed" href="https://twitter.com/iconviet">iconviet</a>
                    }
                }
            </Template>
        </GridColumn>
        <GridColumn Width="100" Field="@nameof(PRepResponse.Location)" HeaderText="Telegram" TextAlign="TextAlign.Right">
            <HeaderTemplate>
                <span><i class="fab pr-2 fa-telegram"></i>Telegram</span>
            </HeaderTemplate>
            <Template>
                @{
                    if (context is PRepResponse prep)
                    {
                        <a class="primary text-condensed" href="https://t.me/iconviet">iconviet</a>
                    }
                }
            </Template>
        </GridColumn>
    </GridColumns>
</EjsGrid>
@code {
    [Parameter]
    public int PageSize { get; set; }

    [Parameter]
    public bool CanPage { get; set; }

    [Parameter]
    public string EditKey { get; set; }

    [Parameter]
    public object PageSizes { get; set; }

    public bool CanEdit => !string.IsNullOrWhiteSpace(EditKey);
} 