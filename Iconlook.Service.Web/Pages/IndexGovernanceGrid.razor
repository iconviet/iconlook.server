<style>
    .online-status {
        color: #00a1b3;
    }
</style>
<EjsGrid RowHeight="40"
         EnableHover="false"
         EnableAltRow="false"
         TValue="PRepResponse"
         AllowSelection="false"
         ClipMode="ClipMode.Ellipsis"
         GridLines="GridLine.Horizontal"
         Query="@(new Query().AddParams("take", 22))">
    <EjsDataManager Url="/api/v1/preps" Adaptor="Adaptors.WebApiAdaptor"></EjsDataManager>
    <GridColumns>
        <GridColumn Width="20" HideAtMedia="(min-width: 480px)">
            <Template>
                <i class="fad fs-n1 fa-dot-circle online-status" style="margin-top: 2px;"></i>
            </Template>
        </GridColumn>
        <GridColumn Width="30" HideAtMedia="(min-width: 480px)" Field="@nameof(PRepResponse.Ranking)">
            <Template>
                @{
                    if (context is PRepResponse prep)
                    {
                        <span class="mono font-weight-bold">@prep.Ranking</span>
                    }
                }
            </Template>
        </GridColumn>
        <GridColumn MinWidth="150" Width="225" Field="@nameof(PRepResponse.Name)">
            <Template>
                @{
                    if (context is PRepResponse prep)
                    {
                        <div class="d-flex align-items-center" style="margin-top: 1px;">
                            <img width="18" height="18" style="margin-top: -1px; margin-right: 8px;" src="@StringHelpers.ParseLogoUrl(prep.LogoUrl)">
                            <a class="secondary" href="address/@prep.Id">@prep.Name</a>
                        </div>
                    }
                }
            </Template>
        </GridColumn>
        <GridColumn Width="105" TextAlign="TextAlign.Right" Field="@nameof(PRepResponse.Votes)">
            <Template>
                @{
                    if (context is PRepResponse prep)
                    {
                        <span class="mono ls-n2 font-weight-semibold">@prep.Votes.ToString("N0")</span>
                        <span style="margin-left: 1px;" class="fs-n2 text-light font-weight-light">votes</span>
                    }
                }
            </Template>
        </GridColumn>
        <GridColumn Width="50" TextAlign="TextAlign.Center" HideAtMedia="(min-width: 480px)">
            <Template>
                @{
                    var random = -0.02 + (0.02 - -0.02) * new Random().NextDouble();
                    if (context is PRepResponse prep)
                    {
                        <span class="mono font-weight-light @(random > 0 ? "positive-dark" : "negative-dark")">@Math.Abs(random).ToString("P2")</span>
                    }
                }
            </Template>
        </GridColumn>
        <GridColumn Width="80" TextAlign="TextAlign.Right" HideAtMedia="(min-width: 480px)" Field="@nameof(PRepResponse.DelegatedPercentage)">
            <Template>
                @{
                    if (context is PRepResponse prep)
                    {
                        <span class="mono text-light font-weight-semibold">@prep.DelegatedPercentage.ToString("P2")</span>
                    }
                }
            </Template>
        </GridColumn>
    </GridColumns>
</EjsGrid>