<style>
    .e-grid .e-rowcell { padding: 0 !important; }

    .e-chip-list.e-chip, .e-chip-list .e-chip {
        height: 25px;
        padding: 0 11px;
        font-weight: 500;
        border-radius: 13px;
        font-size: 12px !important;
        margin: 0 2px 1px 2px !important;
        font-family: 'Roboto Mono' !important;
    }

    .finance { background-color: rgba(193, 87, 0, 0.25) !important; }

    .business { background-color: rgba(227, 22, 91, 0.25) !important; }

    .awareness { background-color: rgba(77, 132, 29, 0.25) !important; }

    .development { background-color: rgba(3, 120, 213, 0.25) !important; }
</style>
<EjsGrid EnableHover="true"
         EnableAltRow="true"
         TValue="PRepResponse"
         AllowPaging="CanPage"
         AllowSelection="CanEdit"
         GridLines="GridLine.Horizontal"
         Query="@(new Query().AddParams("edit", EditKey))">
    <GridPageSettings PageSize="PageSize" PageSizes="PageSizes"></GridPageSettings>
    <GridEditSettings AllowEditing="CanEdit" Mode="EditMode.Dialog"></GridEditSettings>
    <GridSearchSettings Operator="Operator.Contains" IgnoreCase="true"></GridSearchSettings>
    <EjsDataManager Url="/api/v1/prep/list?take=22" Adaptor="Adaptors.WebApiAdaptor"></EjsDataManager>
    <GridColumns>
        <GridColumn Width="217" Field="@nameof(PRepResponse.Name)" HeaderText="P-Rep">
            <HeaderTemplate>
                <span><i class="far pl-1 pr-2 fal fa-users"></i>&nbsp;P-Rep</span>
            </HeaderTemplate>
            <Template>
                @{
                    if (context is PRepResponse prep)
                    {
                        <div class="d-flex align-items-center" style="margin-top: 1px;">
                            <img width="18" height="18" style="margin-top: -1px; margin-right: 8px;" src="@StringHelpers.ParseLogoUrl(prep.LogoUrl)">
                            <a class="secondary" href="address/@prep.Id">@prep.Name</a>
                        </div>
                    }
                }
            </Template>
        </GridColumn>
        <GridColumn Width="200" HeaderText="Development" TextAlign="TextAlign.Center">
            <Template>
                <EjsChipList>
                    <ChipCollection>
                        <ChipListChip Text="D1A" CssClass="development"></ChipListChip>
                        <ChipListChip Text="D1B" CssClass="development"></ChipListChip>
                        <ChipListChip Text="D2A" CssClass="development"></ChipListChip>
                        <ChipListChip Text="D3A" CssClass="development"></ChipListChip>
                    </ChipCollection>
                </EjsChipList>
            </Template>
        </GridColumn>
        <GridColumn Width="200" HeaderText="Awareness" TextAlign="TextAlign.Center">
            <Template>
                <EjsChipList>
                    <ChipCollection>
                        <ChipListChip Text="A1A" CssClass="awareness"></ChipListChip>
                        <ChipListChip Text="A1B" CssClass="awareness"></ChipListChip>
                        <ChipListChip Text="A2A" CssClass="awareness"></ChipListChip>
                        <ChipListChip Text="A3A" CssClass="awareness"></ChipListChip>
                    </ChipCollection>
                </EjsChipList>
            </Template>
        </GridColumn>
        <GridColumn Width="200" HeaderText="Business" TextAlign="TextAlign.Center">
            <Template>
                <EjsChipList>
                    <ChipCollection>
                        <ChipListChip Text="B1A" CssClass="business"></ChipListChip>
                        <ChipListChip Text="B1B" CssClass="business"></ChipListChip>
                        <ChipListChip Text="B2A" CssClass="business"></ChipListChip>
                        <ChipListChip Text="B3A" CssClass="business"></ChipListChip>
                    </ChipCollection>
                </EjsChipList>
            </Template>
        </GridColumn>
        <GridColumn Width="200" HeaderText="Finance" TextAlign="TextAlign.Center">
            <Template>
                <EjsChipList>
                    <ChipCollection>
                        <ChipListChip Text="F1A" CssClass="finance"></ChipListChip>
                        <ChipListChip Text="F1B" CssClass="finance"></ChipListChip>
                        <ChipListChip Text="F2A" CssClass="finance"></ChipListChip>
                        <ChipListChip Text="F3A" CssClass="finance"></ChipListChip>
                    </ChipCollection>
                </EjsChipList>
            </Template>
        </GridColumn>
        <GridColumn Width="91" Field="@nameof(PRepResponse.Score)" HeaderText="Score" TextAlign="TextAlign.Right">
            <HeaderTemplate>
                <div class="pr-2">Score&nbsp;</div>
            </HeaderTemplate>
            <Template>
                @{
                    if (context is PRepResponse prep)
                    {
                        if (prep.Score > 0)
                        {
                            <div class="bg-secondary d-inline-block rounded-pill text-center" style="width: 48px; padding-top: 3px; padding-bottom: 3px;">
                                <span class="fs-n1 mono font-weight-bold" style="letter-spacing: 0.5px;">@prep.Score.ToString("N0")</span>
                            </div>
                        }
                        else
                        {
                            <div class="d-inline-block rounded-pill text-center" style="width: 48px; padding-top: 3px; padding-bottom: 3px;">
                                <span class="fs-n1 ls-2 text-light">--</span>
                            </div>
                        }
                    }
                }
            </Template>
        </GridColumn>
    </GridColumns>
</EjsGrid>

@code {
    [Parameter]
    public int PageSize { get; set; }

    [Parameter]
    public bool CanPage { get; set; }

    [Parameter]
    public string EditKey { get; set; }

    [Parameter]
    public object PageSizes { get; set; }

    public bool CanEdit => !string.IsNullOrWhiteSpace(EditKey);
}